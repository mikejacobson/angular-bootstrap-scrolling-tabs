/**
 * angular-bootstrap-scrolling-tabs
 * @version v0.0.25
 * @link https://github.com/mikejacobson/angular-bootstrap-scrolling-tabs
 * @author Mike Jacobson <michaeljjacobson1@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
(function(){var c={CONTINUOUS_SCROLLING_TIMEOUT_INTERVAL:50,SCROLL_OFFSET_FRACTION:6,DATA_KEY_IS_MOUSEDOWN:"ismousedown"},e=angular.module("mj.scrollingTabs",[]),d=['<div class="scrtabs-tab-container">',' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-left"><span class="glyphicon glyphicon-chevron-left"></span></div>','   <div class="scrtabs-tabs-fixed-container">','     <div class="scrtabs-tabs-movable-container">','       <ul class="nav nav-tabs" role="tablist">',"         <li ng-class=\"{ 'active': tab[propActive || 'active'], ","                         'disabled': tab[propDisabled || 'disabled'] }\" ",'             data-tab="{{tab}}" data-index="{{$index}}" ng-repeat="tab in tabsArr">',"           <a ng-href=\"{{'#' + tab[propPaneId || 'paneId']}}\" role=\"tab\"","                data-toggle=\"{{tab[propDisabled || 'disabled'] ? '' : 'tab'}}\" ","                ng-bind-html=\"sanitize(tab[propTitle || 'title']);\">","           </a>","         </li>","       </ul>","     </div>"," </div>",' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-right"><span class="glyphicon glyphicon-chevron-right"></span></div>',"</div>"].join(""),a=['<div class="scrtabs-tab-wrapper-container" ng-class="{ \'force-height\': !vm.hasTabContentOutsideMovableContainer }">',' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-left"><span class="glyphicon glyphicon-chevron-left"></span></div>','   <div class="scrtabs-tabs-fixed-container">','     <div class="scrtabs-tabs-movable-container" ng-transclude></div>',"   </div>",' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-right"><span class="glyphicon glyphicon-chevron-right"></span></div>',' <div class="scrtabs-tab-content-outside-movable-container" ng-transclude></div>',"</div>"].join("");(function(m,l){var k=function(q,n,o){var r;return function p(){var u=this,t=arguments;function s(){if(!o){q.apply(u,t)}r=null}if(r){clearTimeout(r)}else{if(o){q.apply(u,t)}}r=setTimeout(s,n||100)}};jQuery.fn[l]=function(n){return n?this.bind("resize.scrtabs",k(n)):this.trigger(l)}})(jQuery,"smartresize");function i(l){var k=this;k.stc=l}(function(k){k.handleClickOnLeftScrollArrow=function(n){var m=this,l=m.stc;l.scrollMovement.incrementScrollLeft()};k.handleClickOnRightScrollArrow=function(o){var m=this,l=m.stc,n=l.scrollMovement;n.incrementScrollRight(n.getMinPos())};k.handleMousedownOnLeftScrollArrow=function(n){var m=this,l=m.stc;l.scrollMovement.startScrollLeft()};k.handleMousedownOnRightScrollArrow=function(n){var m=this,l=m.stc;l.scrollMovement.startScrollRight()};k.handleMouseupOnLeftScrollArrow=function(n){var m=this,l=m.stc;l.scrollMovement.stopScrollLeft()};k.handleMouseupOnRightScrollArrow=function(n){var m=this,l=m.stc;l.scrollMovement.stopScrollRight()};k.handleWindowResize=function(o){var m=this,l=m.stc,n=l.$win.width();if(n===l.winWidth){return false}l.winWidth=n;l.elementsHandler.refreshAllElementSizes()}}(i.prototype));function b(l){var k=this;k.stc=l}(function(k){k.initElements=function(o){var m=this,n=m.stc,l=n.$tabsContainer;m.setElementReferences();if(o.isWrappingAngularUITabset&&o.isWatchingDom){m.moveTabContentOutsideScrollContainer(o)}m.setEventListeners()};k.moveTabContentOutsideScrollContainer=function(q){var o=this,p=o.stc,n=p.$tabsContainer,m="scrtabs-tab-content-clone",l=n.find(".scrtabs-tabs-movable-container .tab-content"),r,s;if(!q.isWatchingTabs){l.show().appendTo(n);return}s=l.clone().addClass(m);r=n.find("."+m);if(r.length){r.replaceWith(s)}else{n.append(s)}};k.refreshAllElementSizes=function(){var l=this,o=l.stc,n=o.scrollMovement,p=o.scrollArrowsVisible,q={didScrollToActiveTab:false},m;l.setElementWidths();l.setScrollArrowVisibility();if(o.scrollArrowsVisible){l.setFixedContainerWidthForJustVisibleScrollArrows()}if(o.scrollArrowsVisible||p){if(o.scrollArrowsVisible){m=n.getMinPos();if(o.movableContainerLeftPos<m){n.incrementScrollRight(m)}else{n.scrollToActiveTab({isOnWindowResize:true});q.didScrollToActiveTab=true}}else{o.movableContainerLeftPos=0;n.slideMovableContainerToLeftPos()}}return q};k.removeTranscludedTabContentOutsideMovableContainer=function(){var m=this,n=m.stc,l=n.$tabsContainer;l.find(".scrtabs-tab-content-outside-movable-container").remove()};k.setElementReferences=function(){var m=this,n=m.stc,l=n.$tabsContainer;n.isNavPills=false;n.$fixedContainer=l.find(".scrtabs-tabs-fixed-container");n.$movableContainer=l.find(".scrtabs-tabs-movable-container");n.$tabsUl=n.$movableContainer.find(".nav-tabs");if(!n.$tabsUl.length){n.$tabsUl=n.$movableContainer.find(".nav-pills");if(n.$tabsUl.length){n.isNavPills=true}}n.$tabsLiCollection=n.$tabsUl.find("> li");n.$leftScrollArrow=l.find(".scrtabs-js-tab-scroll-arrow-left");n.$rightScrollArrow=l.find(".scrtabs-js-tab-scroll-arrow-right");n.$scrollArrows=n.$leftScrollArrow.add(n.$rightScrollArrow);n.$win=$(window)};k.setElementWidths=function(){var l=this,m=l.stc;m.containerWidth=m.$tabsContainer.outerWidth();m.winWidth=m.$win.width();m.scrollArrowsCombinedWidth=m.$leftScrollArrow.outerWidth()+m.$rightScrollArrow.outerWidth();
l.setFixedContainerWidth();l.setMovableContainerWidth()};k.setEventListeners=function(){var l=this,n=l.stc,m=n.eventHandlers;n.$leftScrollArrow.off(".scrtabs").on({"mousedown.scrtabs":function(o){m.handleMousedownOnLeftScrollArrow.call(m,o)},"mouseup.scrtabs":function(o){m.handleMouseupOnLeftScrollArrow.call(m,o)},"click.scrtabs":function(o){m.handleClickOnLeftScrollArrow.call(m,o)}});n.$rightScrollArrow.off(".scrtabs").on({"mousedown.scrtabs":function(o){m.handleMousedownOnRightScrollArrow.call(m,o)},"mouseup.scrtabs":function(o){m.handleMouseupOnRightScrollArrow.call(m,o)},"click.scrtabs":function(o){m.handleClickOnRightScrollArrow.call(m,o)}});n.$win.smartresize(function(o){m.handleWindowResize.call(m,o)})};k.setFixedContainerWidth=function(){var l=this,m=l.stc;m.$fixedContainer.width(m.fixedContainerWidth=m.$tabsContainer.outerWidth())};k.setFixedContainerWidthForJustHiddenScrollArrows=function(){var l=this,m=l.stc;m.$fixedContainer.width(m.fixedContainerWidth)};k.setFixedContainerWidthForJustVisibleScrollArrows=function(){var l=this,m=l.stc;m.$fixedContainer.width(m.fixedContainerWidth-m.scrollArrowsCombinedWidth)};k.setMovableContainerWidth=function(){var l=this,n=l.stc,m=n.$tabsUl.find("li");n.movableContainerWidth=0;if(m.length){m.each(function o(){var q=$(this),p=0;if(n.isNavPills){p=parseInt(q.css("margin-left"),10)+parseInt(q.css("margin-right"),10)}n.movableContainerWidth+=(q.outerWidth()+p)});n.movableContainerWidth+=1;if(n.movableContainerWidth<n.fixedContainerWidth){n.movableContainerWidth=n.fixedContainerWidth}}n.$movableContainer.width(n.movableContainerWidth)};k.setScrollArrowVisibility=function(){var l=this,m=l.stc,n=m.movableContainerWidth>m.fixedContainerWidth;if(n&&!m.scrollArrowsVisible){m.$scrollArrows.show();m.scrollArrowsVisible=true;l.setFixedContainerWidthForJustVisibleScrollArrows()}else{if(!n&&m.scrollArrowsVisible){m.$scrollArrows.hide();m.scrollArrowsVisible=false;l.setFixedContainerWidthForJustHiddenScrollArrows()}}}}(b.prototype));function h(l){var k=this;k.stc=l}(function(k){k.continueScrollLeft=function(){var m=this,l=m.stc;l.$timeout(function(){if(l.$leftScrollArrow.data(c.DATA_KEY_IS_MOUSEDOWN)&&(l.movableContainerLeftPos<0)){if(!m.incrementScrollLeft()){m.continueScrollLeft()}}},c.CONTINUOUS_SCROLLING_TIMEOUT_INTERVAL)};k.continueScrollRight=function(l){var n=this,m=n.stc;m.$timeout(function(){if(m.$rightScrollArrow.data(c.DATA_KEY_IS_MOUSEDOWN)&&(m.movableContainerLeftPos>l)){if(!n.incrementScrollRight(l)){n.continueScrollRight(l)}}},c.CONTINUOUS_SCROLLING_TIMEOUT_INTERVAL)};k.decrementMovableContainerLeftPos=function(l){var n=this,m=n.stc;m.movableContainerLeftPos-=(m.fixedContainerWidth/c.SCROLL_OFFSET_FRACTION);if(m.movableContainerLeftPos<l){m.movableContainerLeftPos=l}else{if(m.scrollToTabEdge){n.setMovableContainerLeftPosToTabEdge("right");if(m.movableContainerLeftPos<l){m.movableContainerLeftPos=l}}}};k.getMinPos=function(){var m=this,l=m.stc;return l.scrollArrowsVisible?(l.fixedContainerWidth-l.movableContainerWidth-l.scrollArrowsCombinedWidth):0};k.getMovableContainerCssLeftVal=function(){var m=this,l=m.stc;return(l.movableContainerLeftPos===0)?"0":l.movableContainerLeftPos+"px"};k.incrementScrollLeft=function(){var m=this,l=m.stc;l.movableContainerLeftPos+=(l.fixedContainerWidth/c.SCROLL_OFFSET_FRACTION);if(l.movableContainerLeftPos>0){l.movableContainerLeftPos=0}else{if(l.scrollToTabEdge){m.setMovableContainerLeftPosToTabEdge("left");if(l.movableContainerLeftPos>0){l.movableContainerLeftPos=0}}}m.slideMovableContainerToLeftPos();return(l.movableContainerLeftPos===0)};k.incrementScrollRight=function(l){var n=this,m=n.stc;n.decrementMovableContainerLeftPos(l);n.slideMovableContainerToLeftPos();return(m.movableContainerLeftPos===l)};k.scrollToActiveTab=function(p){var o=this,n=o.stc,s,q,r,l,m;if(!n.scrollArrowsVisible){return}s=n.$tabsUl.find("li.active");if(!s.length){return}q=s.outerWidth();r=s.offset().left;l=n.$rightScrollArrow.offset().left;m=r+q-l;if(m>0){n.movableContainerLeftPos=(p.isOnWindowResize||p.isOnTabsRefresh)?(n.movableContainerLeftPos-m):-m;o.slideMovableContainerToLeftPos()}};k.setMovableContainerLeftPosToTabEdge=function(p){var m=this,l=m.stc,o=-l.movableContainerLeftPos,n=0;l.$tabsLiCollection.each(function(r){var q=$(this).width();n+=q;if(n>o){l.movableContainerLeftPos=(p==="left")?-(n-q):-n;return false}})};k.slideMovableContainerToLeftPos=function(){var m=this,l=m.stc,n;l.movableContainerLeftPos=l.movableContainerLeftPos/1;n=m.getMovableContainerCssLeftVal();l.$movableContainer.stop().animate({left:n},"slow",function o(){var p=m.getMinPos();if(l.movableContainerLeftPos<p){m.decrementMovableContainerLeftPos(p);l.$movableContainer.stop().animate({left:m.getMovableContainerCssLeftVal()},"fast")}})};k.startScrollLeft=function(){var m=this,l=m.stc;l.$leftScrollArrow.data(c.DATA_KEY_IS_MOUSEDOWN,true);m.continueScrollLeft()};k.startScrollRight=function(){var m=this,l=m.stc;l.$rightScrollArrow.data(c.DATA_KEY_IS_MOUSEDOWN,true);m.continueScrollRight(m.getMinPos())
};k.stopScrollLeft=function(){var m=this,l=m.stc;l.$leftScrollArrow.data(c.DATA_KEY_IS_MOUSEDOWN,false)};k.stopScrollRight=function(){var m=this,l=m.stc;l.$rightScrollArrow.data(c.DATA_KEY_IS_MOUSEDOWN,false)}}(h.prototype));function j(k,m){var l=this;l.$tabsContainer=k;l.$timeout=m;l.movableContainerLeftPos=0;l.scrollArrowsVisible=true;l.scrollToTabEdge=false;l.scrollMovement=new h(l);l.eventHandlers=new i(l);l.elementsHandler=new b(l)}(function(k){k.initTabs=function(m){var l=this,p=l.elementsHandler,o=l.scrollMovement;if(m.scrollToTabEdge){l.scrollToTabEdge=true}l.$timeout(function n(){var q;p.initElements(m);q=p.refreshAllElementSizes();if(!q.didScrollToActiveTab){o.scrollToActiveTab({isOnTabsRefresh:m.isWatchingTabs})}},100)};k.removeTranscludedTabContentOutsideMovableContainer=function(){var l=this,m=l.elementsHandler;m.removeTranscludedTabContentOutsideMovableContainer()}}(j.prototype));function g(l,k){function m(n){return k.trustAsHtml(n)}return{restrict:"E",template:d,transclude:false,replace:true,scope:{tabs:"@",watchTabs:"=",propPaneId:"@",propTitle:"@",propActive:"@",propDisabled:"@",localTabClick:"&tabClick"},link:function(q,p,o){var n=new j(p,l),r=o.scrollToTabEdge&&o.scrollToTabEdge.toLowerCase()==="true";q.tabsArr=q.$eval(q.tabs);q.propPaneId=q.propPaneId||"paneId";q.propTitle=q.propTitle||"title";q.propActive=q.propActive||"active";q.propDisabled=q.propDisabled||"disabled";q.sanitize=m;p.on("click.scrollingTabs",".nav-tabs > li",function s(u){var t=$(this).data();q.localTabClick({$event:u,$index:t.index,tab:t.tab})});if(!o.watchTabs){n.initTabs({isWrapperDirective:false,scrollToTabEdge:r});return}q.$watch("watchTabs",function(x,u){var w,t;q.tabsArr=q.$eval(q.tabs);if(x.length&&x[x.length-1].active){l(function(){p.find("ul.nav-tabs > li:last").removeClass("active").find('a[role="tab"]').click()},0)}else{w=p.find(".nav-tabs > li.active");if(w.length){t=w.data("index");q.tabsArr.some(function v(y){if(y[q.propActive]){y[q.propActive]=false;return true}});q.tabsArr[t][q.propActive]=true}}n.initTabs({isWrapperDirective:false,isWatchingTabs:true,scrollToTabEdge:r})},true)}}}function f(k){return{restrict:"A",template:a,transclude:true,replace:true,link:function(t,o,r){var m=new j(o,k),q=o.find("uib-tabset").length>0,l=q||o.find("tabset, .scrtabs-tabs-movable-container .ng-isolate-scope > ul.nav").length>0,s=r.scrollToTabEdge&&r.scrollToTabEdge.toLowerCase()==="true",n={hasTabContentOutsideMovableContainer:true};angular.extend(t,{vm:n});if(!l){m.removeTranscludedTabContentOutsideMovableContainer();n.hasTabContentOutsideMovableContainer=false}if(!q&&!r.watchTabs){m.initTabs({isWrapperDirective:true,isWrappingAngularUITabset:l,scrollToTabEdge:s});return}if(q||(r.watchTabs&&r.watchTabs.toLowerCase()==="true")){if(l){m.removeTranscludedTabContentOutsideMovableContainer();n.hasTabContentOutsideMovableContainer=false}p();k(u,10);if(!q||!r.watchTabs||r.watchTabs.toLowerCase()==="true"){return}}t.$watch(r.watchTabs,function(w,v){if(!l){if(w.length&&w[w.length-1].active){k(function(){o.find("ul.nav-tabs > li:last").removeClass("active").find('a[role="tab"]').click()},0)}}else{if(q){if(w.length&&w[w.length-1].active){k(function(){o.find(".scrtabs-tabs-movable-container ul.nav-tabs > li:last").find('a[role="tab"],a.nav-link').click()},0)}}}p()},true);function p(v){m.initTabs({isWrapperDirective:true,isWrappingAngularUITabset:l,isWatchingTabs:true,scrollToTabEdge:s,isWatchingDom:v&&v.isWatchingDom})}function u(){var y=o.find("ul.nav-tabs"),x,v;if(!y.length){return}t.$watch(function(){return y[0].childNodes.length},function(A,z){if(A!==z){p({isWatchingDom:true})}});t.$watch(function(){k(w,0,false);return y.find("li.active").index()},angular.noop);function w(){x=y.find("li.active").index();if(x!==v){v=x;p({isWatchingDom:true})}return false}}}}}g.$inject=["$timeout","$sce"];f.$inject=["$timeout"];e.directive("scrollingTabs",g);e.directive("scrollingTabsWrapper",f)}());
